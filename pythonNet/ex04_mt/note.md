# 多任务编程

## 意义   
- 充分利用计算机的多核资源,同时运行多个任务,以提高程序的执行效率

## 实现方法
- 多进程,多线程

## 并发
- 同时处理多个任务,内核在任务间不断地切换达到好像多个任务同时被执行的结果.实际每一时刻只有一个任务占有cpu
## 并行
- 多个任务利用计算机多核资源在同时执行,此时多个任务间是并行关系

## 多进程
### 进程(process)
- 定义: 程序在计算机中的一次运行过程

- 程序: 是一个可执行的文件,是静态的,占有磁盘

- 进程: 是一个动态过程,占有计算机资源,有生命周期

### 进程的诞生
1. 用户空间通过启动执行程序,或者调用进程创建借口发起进程创建请求
2. 操作系统接受用户请求,开始创建进程
3. 操作系统分配计算机资源,确定进程状态,开辟空间等
4. 操作系统将进程提供给用户使用

### cpu时间片
- 如果一个进程占有cpu内核,则称这个进程在cpu时间片上
### PCB(进程控制块)
- 在内存中开辟的一块空间,存放进程的基本信息,也是操作系统调用进程的重要标志
### PID(进程ID)
- 系统为每个进程分配一个不重复的ID号,是该进程在系统中的标识
- ps -aux
### 父子进程
- 系统中每一个进程都有唯一的父进程,可以有0个或者多个子进程
- pstree
### 进程状态
- 三态
    - 就绪态:进程具备执行条件,等待系统分配cpu
    - 运行态:进程占有cpu时间片运行
    - 等待态:进程暂时阻塞,不具备执行条件
- 五态
    - 新建态:创建一个新的进程,获取资源的过程
    - 三态
    - 终止态:进程结束,释放资源的过程
- 查看进程状态:ps -aux  ----->
- STAT列
    - S  等待态  
    - D  等待态
    - T  暂停态
    - R  运行态
    - Z  僵尸
### 进程优先级
- 决定程序的优先权限和占有资源的优先程度
- linux 优先级范围: -20 ~ 19 数字越小优先级越高
- 查看优先级 top 
- 设置程序执行优先级 sudo nice -num python3 ....
- `<` :有较高优先级的 
- `>` :有较低优先级的 
- `+` :前台进程
- `s` :会话组组长
- `1` :有进程链接

### 后台运行进程: 
- 运行命令后加 &
### 杀死一个进程
- kill -9 PID

### 进程运行特征
1. 进程可以使用计算机多核资源
2. 进程是计算机分配资源的最小单位
3. 进程之间的运行互不干扰,相互独立
4. 每个进程空间独立,有自己的空间资源

### 进程创建
```py
import os
pid = os.fork()
```
- 功能:创建新的进程
- 返回值:
    - 失败返回一个负数
    - 成功 原进程中返回新进程的PID号 新进程中返回0
    - 会复制原有进程的所有运行空间,创建一个新的进程,并且会执行
     
    